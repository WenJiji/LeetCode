class Solution {
public:
    bool containsNearbyDuplicate(vector<int>& nums, int k) {
		unordered_map<int, int> map;
		pair<unordered_map<int, int>::iterator, int> p;
		int gap = 0;
		for (int i = 0; i<nums.size(); i++) {
			p = map.insert(unordered_map<int, int>::value_type(nums.at(i), i));
			if (!p.second) {
				if (i - p.first->second <= k)
					return true;
				else
					p.first->second = i;
			}
		}
		return false;
    }
};
